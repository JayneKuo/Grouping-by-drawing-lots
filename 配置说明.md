# GitHub Gist 配置说明

## 🔐 重要说明

**移除代码中的token不会影响你的数据同步！**

原因：
- `.env.local` 文件在 `.gitignore` 中，不会被提交到Git
- 你的本地配置仍然保存在 `.env.local` 文件中
- 只有新安装或新环境才需要重新配置

## 📝 如何配置Token

### 方法1：使用配置脚本（推荐）

1. **双击运行**：`配置Gist.bat`
2. **输入你的Token**：脚本会提示你输入
3. **完成**：脚本会自动创建 `.env.local` 文件

### 方法2：手动创建配置文件

1. **在项目根目录创建** `.env.local` 文件
2. **添加以下内容**：

```env
VITE_GIST_ID=2cabed01d5406fa3ea1334f2e116bc90
VITE_GIST_TOKEN=你的Token（以ghp_开头）
```

3. **保存文件**

## 🔑 如何获取GitHub Token

1. **访问**：https://github.com/settings/tokens
2. **点击**："Generate new token (classic)"
3. **设置**：
   - Note（备注）：`Tennis App Gist Token`
   - Expiration（过期时间）：选择 `No expiration` 或自定义
   - **勾选权限**：`gist` ✅
4. **点击**："Generate token"
5. **复制Token**：以 `ghp_` 开头的字符串

⚠️ **重要**：Token只显示一次，请妥善保存！

## ✅ 验证配置

配置完成后：

1. **重启开发服务器**（如果正在运行）
2. **打开浏览器控制台**（F12）
3. **查看日志**：
   - 应该看到：`📖 开始从GitHub Gist读取数据...`
   - 应该看到：`✅ 从Gist读取数据成功`

## 🚀 部署到Vercel

### 重要：Vercel环境变量配置

**`.env.local` 文件不会提交到Git**，所以需要在Vercel Dashboard中手动配置环境变量。

### 详细步骤：

1. **登录** [Vercel Dashboard](https://vercel.com/dashboard)
2. **选择项目**（如果没有，先导入GitHub仓库）
3. **进入设置**：
   - 点击项目名称
   - 点击顶部 **Settings**
   - 左侧选择 **Environment Variables**
4. **添加环境变量**：
   
   **第一个变量：**
   - Key: `VITE_GIST_ID`
   - Value: `2cabed01d5406fa3ea1334f2e116bc90`
   - Environment: ✅ Production ✅ Preview ✅ Development（全选）
   - 点击 **Save**
   
   **第二个变量：**
   - Key: `VITE_GIST_TOKEN`
   - Value: `你的Token（例如：ghp_xxxxxxxxxxxxx）`
   - Environment: ✅ Production ✅ Preview ✅ Development（全选）
   - 点击 **Save**

5. **重新部署**：
   - 回到项目首页
   - 点击 **Deployments** 标签
   - 找到最新部署，点击右侧 **...** → **Redeploy**

### ⚠️ 注意事项

- **必须配置**：如果不配置环境变量，Vercel部署后无法同步数据
- **Token安全**：Token只在Vercel Dashboard中配置，不要提交到Git
- **环境选择**：建议三个环境都配置，确保所有部署都能正常工作

### 📖 更详细的说明

查看 `Vercel部署说明.md` 获取完整的部署指南。

## ❓ 常见问题

### Q: 我的数据还在吗？

**A:** 是的！数据存储在GitHub Gist中，不会丢失。只要Gist ID和Token正确，就能访问。

### Q: 为什么代码中没有Token？

**A:** 为了安全！Token是敏感信息，不应该提交到Git。`.env.local` 文件在 `.gitignore` 中，不会被提交。

### Q: 如何检查我的配置？

**A:** 
1. 检查 `.env.local` 文件是否存在
2. 检查文件内容是否正确
3. 查看浏览器控制台是否有错误

### Q: Token过期了怎么办？

**A:** 
1. 重新生成Token（参考上面的步骤）
2. 更新 `.env.local` 文件中的 `VITE_GIST_TOKEN`
3. 重启开发服务器

## 📞 需要帮助？

如果遇到问题：
1. 检查浏览器控制台的错误信息
2. 确认Token是否有 `gist` 权限
3. 确认Gist ID是否正确
4. 确认 `.env.local` 文件格式正确

